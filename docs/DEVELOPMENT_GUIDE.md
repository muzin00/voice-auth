# 開発ガイド

> 本ドキュメントは、機能実装時の開発方針を定めたものです。

## 基本方針

### 1. Outside-In 開発

**入口と出口を先に作り、中身を後から肉付けする。**

#### なぜこの順序か？

1. **早期に動くものができる**: スタブでも動作確認が可能
2. **インターフェースが安定する**: 後から変更が少ない
3. **並行開発しやすい**: 入口が決まれば他の開発者も作業できる
4. **テストが書きやすい**: 入出力が明確なのでテストを先に書ける

#### 実践手順

1. **入口を定義**: エンドポイントのパス、HTTPメソッド、リクエストの型
2. **出口を定義**: レスポンスの型、エラーレスポンスの型
3. **スタブで繋ぐ**: 固定値を返す最小限の実装（この時点で動作確認可能）
4. **中身を肉付け**: ビジネスロジックを段階的に実装

### 2. テスト駆動開発 (TDD)

**テストを先に書き、テストが通るように実装する。**

#### Red → Green → Refactor

1. **RED**: テストを書く（失敗する）
2. **GREEN**: テストが通る最小限の実装
3. **REFACTOR**: コードを整理する（テストは通ったまま）

#### TDD と Outside-In の組み合わせ

1. 入口のテストを書く (RED)
2. スタブで通す (GREEN)
3. 中身のテストを書く (RED)
4. 中身を実装する (GREEN)
5. リファクタリング (REFACTOR)

---

## 実装の進め方

### フェーズ分割の考え方

- **Phase 1: スケルトン** - API定義、スタブ実装。「形」を決める
- **Phase 2: 永続化** - データモデル、DB接続。「保存」できるようにする
- **Phase 3: コアロジック** - ビジネスロジック実装。「処理」を実装する
- **Phase N: 統合・最適化** - 全体結合、パフォーマンス。「完成」させる

### 各フェーズで守ること

- 1フェーズ = 1つの関心事
- 各フェーズ終了時にテストがすべてグリーン
- 各フェーズで動くものがある状態を維持

---

## ドキュメント管理

**設計書を更新しながら進める。**

- 設計書は開発ログを兼ねる（決めたこと・学んだことを追記）
- 重要な決定は ADR (Architecture Decision Record) として残す
- 先にゴールを決めず、一歩ずつ進める

---

## チェックリスト

### 実装開始前

- [ ] 入力と出力の型は明確か？
- [ ] エラーケースは洗い出されているか？
- [ ] テストシナリオは書けるか？

### 各フェーズ終了時

- [ ] テストはすべてグリーンか？
- [ ] 型チェックは通るか？
- [ ] リントエラーはないか？
- [ ] 動作確認はできたか？

---

*このガイドは汎用的な開発方針です。プロジェクト固有の詳細は別途管理してください。*
